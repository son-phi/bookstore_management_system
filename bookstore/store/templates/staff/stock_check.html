{% extends "base.html" %}
{% block title %}Stock Check{% endblock %}
{% block content %}

<div class="d-flex justify-content-between align-items-center mb-4">
    <h2 class="mb-0">Stock Check</h2>
    <a href="/staff/books/" class="btn btn-outline-secondary">
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-arrow-left" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M15 8a.5.5 0 0 0-.5-.5H2.707l3.147-3.146a.5.5 0 1 0-.708-.708l-4 4a.5.5 0 0 0 0 .708l4 4a.5.5 0 0 0 .708-.708L2.707 8.5H14.5A.5.5 0 0 0 15 8Z"/>
        </svg>
        Back to Books
    </a>
</div>

<div class="card mb-4 shadow-sm">
    <div class="card-body">
        <form method="GET" class="row g-2 align-items-center">
            <div class="col-auto">
                <label for="warehouse" class="col-form-label fw-bold">Filter by Warehouse:</label>
            </div>
            <div class="col-md-4">
                <select name="warehouse" id="warehouse" class="form-select" onchange="this.form.submit()">
                    <option value="">All Warehouses</option>
                    {% for wh in warehouses %}
                        <option value="{{ wh.warehouseID }}" {% if selected_wh == wh.warehouseID %}selected{% endif %}>{{ wh.name }}</option>
                    {% endfor %}
                </select>
            </div>
        </form>
    </div>
</div>

<div class="card shadow-sm">
    <div class="table-responsive">
        <table class="table table-hover mb-0 align-middle">
            <thead class="table-light">
                <tr>
                    <th scope="col" class="ps-3">Warehouse</th>
                    <th scope="col">Book Title</th>
                    <th scope="col">Stock Quantity</th>
                </tr>
            </thead>
            <tbody>
                {% for entry in entries %}
                <tr>
                    <td class="ps-3 fw-medium">{{ entry.warehouseID.name }}</td>
                    <td>{{ entry.bookID.title }}</td>
                    <td>
                        <span class="badge rounded-pill bg-info text-dark border border-info-subtle px-3">
                            {{ entry.quantity }}
                        </span>
                    </td>
                </tr>
                {% empty %}
                <tr>
                    <td colspan="3" class="text-center py-5 text-muted">
                        No stock entries found.
                    </td>
                </tr>
                {% endfor %}
            </tbody>
        </table>
    </div>
</div>

{% endblock %}
